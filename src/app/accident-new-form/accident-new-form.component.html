<mat-toolbar fxLayout="row" mat-dialog-title color="primary">
  <div fxFlex>
    Registro de Accidente
  </div>
  <span fxFlex class="flex-spacer"></span>
  <div fxFlex  align="end">
    <button id="btnClose" mat-button mat-dialog-close>&times;</button>
  </div>
</mat-toolbar>

<form novalidate #accidentForm="ngForm" (ngSubmit)="create()">
  <mat-dialog-content>
    <mat-form-field class="example-full-width">
      <input matInput placeholder="Empleado" aria-label="Empleado" [(ngModel)]="accident.employeeKey"
             [matAutocomplete]="autoEmployee" name="employee" required>
      <mat-autocomplete #autoEmployee="matAutocomplete">
        <mat-option *ngFor="let employee of filteredEmployee | async" [value]="employee.employeeKey">
          <span>{{employee.firstName}}</span> |
          <small>Code: {{employee.employeeCode}}</small>
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
    <br>
    <mat-form-field class="example-full-width">
      <textarea matInput placeholder="Título" [(ngModel)]="accident.title" name="title" required></textarea>
    </mat-form-field>
    <br>
    <mat-form-field class="example-full-width">
      <textarea matInput placeholder="Código" [(ngModel)]="accident.code" name="code" required></textarea>
    </mat-form-field>
    <br>
    <mat-form-field class="example-full-width">
      <textarea matInput placeholder="Nivel de riesgo" [(ngModel)]="accident.levelRiskId" name="levelRisk"></textarea>
    </mat-form-field>
    <br>
    <mat-form-field class="example-full-width">
      <mat-select placeholder=" Tipo de accidente" [(ngModel)]="accident.accidentTypeKey"
                  name="accidentTypeKey" required #accidentTypeKey="ngModel">
        <mat-option *ngFor="let est of accidenttypes" [value]="est.accidentTypeKey">
          {{est.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <br>
    <mat-form-field class="example-full-width">
      <input matInput placeholder="Fecha de suceso" type="date" [(ngModel)]="accident.dateEvent" name="dateEvent"
             required #dateEvent="ngModel">
    </mat-form-field>
    <br>
    <mat-form-field class="example-full-width">
      <input matInput placeholder="Descripción" type="text" [(ngModel)]="accident.describeIssue" name="describeIssue"
             required #describeIssue="ngModel">
    </mat-form-field>
    <br>
    <mat-form-field class="example-full-width">
      <mat-select placeholder=" Estado" [(ngModel)]="accident.status" name="status" required #status="ngModel">
        <mat-option *ngFor="let est of statuslist" [value]="est.codigo">
          {{est.nombre}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <br>
  </mat-dialog-content>
  <mat-dialog-actions>
    <span class="flex-spacer"></span>
    <button id="btnCancel" mat-button mat-dialog-close>Cancelar</button>
    <button type="submit" id="create" mat-button class="background-primary text-floral-white"
            [disabled]="accidentForm.form.invalid" onclick="disabled">Crear
    </button>
  </mat-dialog-actions>
</form>
